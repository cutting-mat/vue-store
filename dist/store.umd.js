(function(n,o){typeof exports=="object"&&typeof module!="undefined"?o(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],o):(n=typeof globalThis!="undefined"?globalThis:n||self,o(n.VueStore={},n.Vue))})(this,function(n,o){"use strict";const i={state:{},actions:{},inStore(t){return this.state[t]!==void 0},set(t,e){return new Promise((s,a)=>{this.inStore(t)?(this.state[t]=e,s(e)):a(`[Store] set("${t}", value): the key has not registered yet!`)})},get(t){if(t&&t.split)return this.inStore(t)?this.state[t]:new Error(`[Store] get("${t}"): the key has not registered yet!`)},action(t,e){return new Promise((s,a)=>{if(typeof this.actions[t]=="function"){const r=this.actions[t]({get:this.get.bind(i),set:this.set.bind(i)},e);r&&typeof r.then=="function"?r.then(c=>{this.inStore(t)&&this.set(t,c),s(c)}).catch(a):s(r)}else a(`[Store] action("${t}", ${e}): the action has not registered yet!`)})}};function f(t,e){if(t&&(t.state||t.actions)&&e===void 0&&(e=t,t=null),e){let s=e.state||{};typeof s=="function"&&(s=s()||{});let a=o.isReactive(i.state)?o.toRaw(i.state):i.state;const r=Object.assign(a,s);i.state=o.reactive(r),Object.keys(r).forEach(c=>{o.watch(()=>i.state[c],l=>{console.log("[Store] update:",c,"=>",l)})}),Object.assign(i.actions,e.actions||{})}return t&&(t.config.globalProperties.$store=i),i}const u={install:f};n.default=f,n.install=u,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
