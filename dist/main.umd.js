(function(n,o){typeof exports=="object"&&typeof module!="undefined"?o(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],o):(n=typeof globalThis!="undefined"?globalThis:n||self,o(n.store={},n.Vue))})(this,function(n,o){"use strict";const e={state:{},actions:{},inStore(t){return this.state[t]!==void 0},set(t,i){return new Promise((s,f)=>{this.inStore(t)?(this.state[t]=i,s(i)):f(`[Store] set("${t}", value): the key has not registered yet!`)})},get(t){if(t&&t.split)return this.inStore(t)?this.state[t]:new Error(`[Store] get("${t}"): the key has not registered yet!`)},action(t,i){return new Promise((s,f)=>{if(typeof this.actions[t]=="function"){const a=this.actions[t]({get:this.get.bind(e),set:this.set.bind(e)},i);a&&typeof a.then=="function"?a.then(r=>{this.inStore(t)&&this.set(t,r),s(r)}).catch(f):s(a)}else f(`[Store] action("${t}", ${i}): the action has not registered yet!`)})}};let c={};function u(t,i){if(t&&i===void 0&&(t.state||t.actions?(i=t,t=null):(t=null,console.warn("[Store] options format error"))),i){let s=i.state||{};typeof s=="function"&&(s=s()||{});let f=o.isReactive(e.state)?o.toRaw(e.state):e.state;const a=Object.assign(f,s);e.state=o.reactive(a),Object.keys(a).forEach(r=>{typeof c[r]=="function"&&c[r](),c[r]=o.watch(()=>e.state[r],h=>{console.log("[Store] update:",r,"=>",h)})}),Object.assign(e.actions,i.actions||{})}return t&&(t.config.globalProperties.$store=e,t.mixin({data(){return{$state:e.state}}})),e}const l={install:u};n.default=u,n.plugin=l,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
