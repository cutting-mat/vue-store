(function(n,o){typeof exports=="object"&&typeof module!="undefined"?o(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],o):(n=typeof globalThis!="undefined"?globalThis:n||self,o(n.store={},n.Vue))})(this,function(n,o){"use strict";const i={state:{},actions:{},inStore(t){return this.state[t]!==void 0},set(t,e){return new Promise((s,a)=>{this.inStore(t)?(this.state[t]=e,s(e)):a(`[Store] set("${t}", value): the key has not registered yet!`)})},get(t){if(t&&t.split)return this.inStore(t)?this.state[t]:new Error(`[Store] get("${t}"): the key has not registered yet!`)},action(t,e){return new Promise((s,a)=>{if(typeof this.actions[t]=="function"){const f=this.actions[t]({get:this.get.bind(i),set:this.set.bind(i)},e);f&&typeof f.then=="function"?f.then(r=>{this.inStore(t)&&this.set(t,r),s(r)}).catch(a):s(f)}else a(`[Store] action("${t}", ${e}): the action has not registered yet!`)})}};let c={};function u(t,e){if(t&&e===void 0&&(t.state||t.actions?(e=t,t=null):(t=null,console.warn("[Store] options format error"))),e){let s=e.state||{};typeof s=="function"&&(s=s()||{});let a=o.isReactive(i.state)?o.toRaw(i.state):i.state;const f=Object.assign(a,s);i.state=o.reactive(f),Object.keys(f).forEach(r=>{typeof c[r]=="function"&&c[r](),c[r]=o.watch(()=>i.state[r],h=>{console.log("[Store] update:",r,"=>",h)})}),Object.assign(i.actions,e.actions||{})}return t&&(t.config.globalProperties.$store=i),i}const l={install:u};n.default=u,n.plugin=l,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
